# –ü–ª–∞–Ω —Ä–æ–∑—Ä–æ–±–∫–∏ –º–æ–¥—É Bannerlord Coop Spectator
**–ú–æ–¥ –¥–ª—è –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ—ó –≥—Ä–∏ –≤ Mount & Blade II: Bannerlord**

---

## üìã –û–≥–ª—è–¥ –ø—Ä–æ—î–∫—Ç—É

### –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è
–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ø—Ä–æ—â–µ–Ω–æ–≥–æ –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –º–æ–¥—É —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î:
- **–•–æ—Å—Ç** –≥—Ä–∞—î –∑–≤–∏—á–∞–π–Ω—É —Å–∏–Ω–≥–ø–ª–µ—î—Ä–Ω—É –∫–∞–º–ø–∞–Ω—ñ—é
- **–ö–ª—ñ—î–Ω—Ç–∏** –ø–∞—Å–∏–≤–Ω–æ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—é—Ç—å –∑–∞ –≥—Ä–æ—é —Ö–æ—Å—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç—ñ
- **–£ –±–∏—Ç–≤–∞—Ö** –≤—Å—ñ –∫–ª—ñ—î–Ω—Ç–∏ –ø—Ä–∏—î–¥–Ω—É—é—Ç—å—Å—è —ñ –≥—Ä–∞—é—Ç—å –∑–∞ —é–Ω—ñ—Ç—ñ–≤ –∑–∞ –±—É–¥—å-—è–∫—É —Å—Ç–æ—Ä–æ–Ω—É

### –ü–µ—Ä–µ–≤–∞–≥–∏ –ø—ñ–¥—Ö–æ–¥—É
‚úÖ –ù–µ –ª–∞–º–∞—î —ñ—Å–Ω—É—é—á—É –º–µ—Ö–∞–Ω—ñ–∫—É –∫–∞–º–ø–∞–Ω—ñ—ó  
‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–±—É–¥–æ–≤–∞–Ω–∏–π –º—É–ª—å—Ç–∏–ø–ª–µ—î—Ä –¥–ª—è –±–∏—Ç–≤  
‚úÖ –ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–∏ = –º–µ–Ω—à–µ –±–∞–≥—ñ–≤ –ø—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è—Ö  
‚úÖ –ü—Ä–æ—Å—Ç—ñ—à–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –Ω—ñ–∂ –ø–æ–≤–Ω–∏–π –∫–æ–æ–ø  

### –¶—ñ–ª—å–æ–≤–∞ –∞—É–¥–∏—Ç–æ—Ä—ñ—è
- –ì—Ä–∞–≤—Ü—ñ —è–∫—ñ —Ö–æ—á—É—Ç—å —Ä–∞–∑–æ–º –≥—Ä–∞—Ç–∏ —É –±–∏—Ç–≤–∞—Ö –±–µ–∑ —Å–∫–ª–∞–¥–Ω–æ–≥–æ full coop
- ~45,000 —É—á–∞—Å–Ω–∏–∫—ñ–≤ Discord Bannerlord Coop —è–∫—ñ —á–µ–∫–∞—é—Ç—å —Ä–æ–±–æ—á–∏–π –º–æ–¥
- –î—Ä—É–∑—ñ —è–∫—ñ —Ö–æ—á—É—Ç—å –ø—Ä–æ—Å—Ç–æ "–∑–∞–π—Ç–∏ —ñ –ø–æ–±–∏—Ç–∏—Å—è"

## üéØ –î–µ—Ç–∞–ª—å–Ω–∞ —Ä–æ–∑–±–∏–≤–∫–∞ –ø–æ –µ—Ç–∞–ø–∞—Ö

---

## –ï–¢–ê–ü 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ (–í–∏–∫–æ–Ω–∞–Ω–æ)

#### 1.1 –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ —Ä–æ–∑—Ä–æ–±–∫–∏
```
‚úì Visual Studio 2022 Community (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∞)
‚úì .NET SDK 6.0+
‚úì Bannerlord –≥—Ä–∞ (Steam)
‚úì Vortex Mod Manager –∞–±–æ —Ä—É—á–Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –º–æ–¥—ñ–≤
```

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ—î–∫—Ç—É:**
```
1. –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞–ø–∫—É –ø—Ä–æ—î–∫—Ç—É: BannerlordCoopSpectator/
2. –î–æ–¥–∞—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ DLL –≥—Ä–∏:
   - TaleWorlds.Core.dll
   - TaleWorlds.MountAndBlade.dll
   - TaleWorlds.CampaignSystem.dll
   - TaleWorlds.Library.dll
3. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—é –≤ –ø–∞–ø–∫—É –º–æ–¥—ñ–≤ Bannerlord
```

**–ö–æ–º–∞–Ω–¥–∏ –¥–ª—è Cursor:**
```
"Create C# project structure for Bannerlord mod"
"Show me how to reference Bannerlord DLL files"
"Generate SubModule.xml template for Bannerlord"
```

#### 1.2 –ü–µ—Ä—à–∏–π "Hello World" –º–æ–¥

**–ó–∞–≤–¥–∞–Ω–Ω—è:**
–°—Ç–≤–æ—Ä–∏—Ç–∏ –º–æ–¥ —è–∫–∏–π –≤–∏–≤–æ–¥–∏—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ–ª–∏ –≥—Ä–∞–≤–µ—Ü—å –≤—Ö–æ–¥–∏—Ç—å —É –±–∏—Ç–≤—É.

**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
1. –°–∫–æ–º–ø—ñ–ª—é–≤–∞—Ç–∏ –º–æ–¥
2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Bannerlord
3. –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –º–æ–¥ —É Launcher
4. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∫–∞–º–ø–∞–Ω—ñ—é
5. –ü–æ–±–∞—á–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "Coop Spectator mod loaded!"

**–ö–æ–º–∞–Ω–¥–∏ –¥–ª—è Cursor:**
```
"How to detect battle start in Bannerlord using Harmony"
"Create Bannerlord behavior that logs when player enters mission"
"Show me Bannerlord Mission lifecycle events"
```

#### 1.3 –í–∏–≤—á–µ–Ω–Ω—è Bannerlord API

**Campaign —Å–∏—Å—Ç–µ–º–∞:**
```csharp
Campaign.Current                    // –ü–æ—Ç–æ—á–Ω–∞ –∫–∞–º–ø–∞–Ω—ñ—è
Campaign.Current.MainParty          // –ê—Ä–º—ñ—è –≥—Ä–∞–≤—Ü—è
Hero.MainHero                       // –ü–µ—Ä—Å–æ–Ω–∞–∂ –≥—Ä–∞–≤—Ü—è
MobileParty.MainParty.Position2D    // –ü–æ–∑–∏—Ü—ñ—è –Ω–∞ –∫–∞—Ä—Ç—ñ
```

**Mission (–±–∏—Ç–≤–∞) —Å–∏—Å—Ç–µ–º–∞:**
```csharp
Mission.Current                     // –ü–æ—Ç–æ—á–Ω–∞ –º—ñ—Å—ñ—è (–±–∏—Ç–≤–∞)
Mission.OnMissionModeChange         // –ü–æ–¥—ñ—è –∑–º—ñ–Ω–∏ —Ä–µ–∂–∏–º—É –º—ñ—Å—ñ—ó
Agent.Main                          // –ê–≥–µ–Ω—Ç (–ø–µ—Ä—Å–æ–Ω–∞–∂) –≥—Ä–∞–≤—Ü—è
Mission.Agents                      // –í—Å—ñ –∞–≥–µ–Ω—Ç–∏ —É –±–∏—Ç–≤—ñ
```

**Networking:**
```csharp
GameNetwork.IsServer                // –ß–∏ —î —Å–µ—Ä–≤–µ—Ä–æ–º?
GameNetwork.IsClient                // –ß–∏ —î –∫–ª—ñ—î–Ω—Ç–æ–º?
GameNetwork.NetworkPeers            // –ü—ñ–¥–∫–ª—é—á–µ–Ω—ñ –≥—Ä–∞–≤—Ü—ñ
```

**–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –≤–ø—Ä–∞–≤–∏:**
1. –°—Ç–≤–æ—Ä–∏—Ç–∏ behavior —è–∫–∏–π –ª–æ–≥—É—î –ø–æ–∑–∏—Ü—ñ—é –≥—Ä–∞–≤—Ü—è –∫–æ–∂–Ω—ñ 5 —Å–µ–∫—É–Ω–¥
2. –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–¥ —è–∫–∏–π –≤–∏—Ç—è–≥—É—î —Å–∫–ª–∞–¥ –∞—Ä–º—ñ—ó –≥—Ä–∞–≤—Ü—è
3. –ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –ø–æ–¥—ñ—ó –≤—Ö–æ–¥—É/–≤–∏—Ö–æ–¥—É –∑ –±–∏—Ç–≤–∏

**–ö–æ–º–∞–Ω–¥–∏ –¥–ª—è Cursor:**
```
"Bannerlord CampaignBehaviorBase example"
"How to get player party troops in Bannerlord"
"Bannerlord Mission events documentation"
```

#### 1.4 –ü—Ä–æ—Å—Ç–∏–π TCP —Å–µ—Ä–≤–µ—Ä/–∫–ª—ñ—î–Ω—Ç

**–ó–∞–≤–¥–∞–Ω–Ω—è:**
–°—Ç–≤–æ—Ä–∏—Ç–∏ –±–∞–∑–æ–≤–∏–π –º–µ—Ä–µ–∂–µ–≤–∏–π –∫–æ–¥ —è–∫–∏–π –º–æ–∂–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –¥–∞–Ω—ñ –º—ñ–∂ –¥–≤–æ–º–∞ Bannerlord –∫–ª—ñ—î–Ω—Ç–∞–º–∏.

**–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:**
```
[–•–æ—Å—Ç Bannerlord] ‚Üê‚Üí [TCP Server] ‚Üê‚Üí [TCP Client] ‚Üê‚Üí [–ö–ª—ñ—î–Ω—Ç Bannerlord]
```

**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è networking:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –¥–≤—ñ –∫–æ–ø—ñ—ó Bannerlord
2. –ù–∞ –æ–¥–Ω—ñ–π –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ "Host Server" (–∫–æ–Ω—Å–æ–ª—å–Ω–∞ –∫–æ–º–∞–Ω–¥–∞)
3. –ù–∞ –¥—Ä—É–≥—ñ–π "Connect to 127.0.0.1"
4. –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
5. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ –≤–æ–Ω–æ –æ—Ç—Ä–∏–º–∞–Ω–µ

**–ö–æ–º–∞–Ω–¥–∏ –¥–ª—è Cursor:**
```
"Add JSON serialization to C# TCP networking"
"Create message protocol for game state sync"
"Handle TCP connection errors and reconnection"
```

---

## –ï–¢–ê–ü 2: Spectator Mode (–í–∏–∫–æ–Ω–∞–Ω–æ)

### 2.1 Broadcaster - –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–∏—Ö —Ö–æ—Å—Ç–∞

**–ó–∞–≤–¥–∞–Ω–Ω—è:**
–•–æ—Å—Ç –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î —Å–≤—ñ–π —Å—Ç–∞–Ω –∫–ª—ñ—î–Ω—Ç–∞–º.

### 2.2 Spectator UI - –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤

**–ó–∞–≤–¥–∞–Ω–Ω—è:**
–°—Ç–≤–æ—Ä–∏—Ç–∏ UI —è–∫–∏–π –ø–æ–∫–∞–∑—É—î –∫–∞—Ä—Ç—É —ñ –ø–æ–∑–∏—Ü—ñ—é —Ö–æ—Å—Ç–∞.

### 2.3 –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç—Ä–æ–ª—é –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤

**–ó–∞–≤–¥–∞–Ω–Ω—è:**
–ó–∞–±–æ—Ä–æ–Ω–∏—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞–º –∫–µ—Ä—É–≤–∞—Ç–∏ –≥—Ä–æ—é –Ω–∞ –∫–∞—Ä—Ç—ñ.

## –ï–¢–ê–ü 3: Battle Integration (–†–æ–∑—Ä–æ–±–ª—é—î—Ç—å—Å—è)

### 3.1 –î–µ—Ç–µ–∫—Ü—ñ—è –ø–æ—á–∞—Ç–∫—É –±–∏—Ç–≤–∏ —É —Ö–æ—Å—Ç–∞ (–í–∏–∫–æ–Ω–∞–Ω–æ)

### 3.2 –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –≤ –º—É–ª—å—Ç–∏–ø–ª–µ—î—Ä–Ω—É –±–∏—Ç–≤—É

**MissionConverter.cs:**
```csharp
using TaleWorlds.Core;
using TaleWorlds.MountAndBlade;
using TaleWorlds.Engine;

namespace CoopSpectator.Mission
{
    public class MissionConverter
    {
        // –í–∑—è—Ç–∏ –ø–æ—Ç–æ—á–Ω—É —Å–∏–Ω–≥–ø–ª–µ—î—Ä–Ω—É –º—ñ—Å—ñ—é —ñ –∫–æ–Ω–≤–µ—Ä—Ç—É–≤–∞—Ç–∏ —É MP
        public static void ConvertToMultiplayer()
        {
            // 1. –ó–±–µ—Ä–µ–≥—Ç–∏ —Å—Ç–∞–Ω –ø–æ—Ç–æ—á–Ω–æ—ó –±–∏—Ç–≤–∏
            Mission currentMission = Mission.Current;
            if (currentMission == null)
            {
                InformationManager.DisplayMessage(
                    new InformationMessage("No active battle to convert")
                );
                return;
            }
            
            // 2. –û—Ç—Ä–∏–º–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –º—ñ—Å—ñ—ó
            string sceneName = currentMission.SceneName;
            string missionName = currentMission.Name;
            
            // 3. –ó–∞–≤–µ—Ä—à–∏—Ç–∏ —Å–∏–Ω–≥–ø–ª–µ—î—Ä–Ω—É –º—ñ—Å—ñ—é
            currentMission.EndMission();
            
            // 4. –°—Ç–≤–æ—Ä–∏—Ç–∏ –º—É–ª—å—Ç–∏–ø–ª–µ—î—Ä–Ω—É –º—ñ—Å—ñ—é –∑ —Ç–∏–º–∏ –∂ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
            MissionInitializerRecord initRecord = new MissionInitializerRecord(sceneName);
            initRecord.PlayingInCampaignMode = false; // MP —Ä–µ–∂–∏–º
            initRecord.DoNotUseLoadingScreen = false;
            
            // 5. –î–æ–¥–∞—Ç–∏ –º—É–ª—å—Ç–∏–ø–ª–µ—î—Ä–Ω—ñ behaviors
            // –¶–µ –Ω–∞–π—Å–∫–ª–∞–¥–Ω—ñ—à–∞ —á–∞—Å—Ç–∏–Ω–∞ - —Ç—Ä–µ–±–∞ –≤–∏–≤—á–∏—Ç–∏ —è–∫ –ø—Ä–∞—Ü—é—î MP —Å–∏—Å—Ç–µ–º–∞
        }
    }
}
```

**–ü–†–ò–ú–Ü–¢–ö–ê:** –¶—è —á–∞—Å—Ç–∏–Ω–∞ –ø–æ—Ç—Ä–µ–±—É—î –≥–ª–∏–±–æ–∫–æ–≥–æ –≤–∏–≤—á–µ–Ω–Ω—è —Ç–æ–≥–æ —è–∫ Bannerlord —Å—Ç–≤–æ—Ä—é—î MP –±–∏—Ç–≤–∏. –î–æ–≤–µ–¥–µ—Ç—å—Å—è:
1. –í–∏–≤—á–∏—Ç–∏ –≤–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ –º—É–ª—å—Ç–∏–ø–ª–µ—î—Ä–Ω–∏—Ö –º–æ–¥—ñ–≤
2. –ó—Ä–æ–∑—É–º—ñ—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ SP —ñ MP missions
3. –ù–∞–≤—á–∏—Ç–∏—Å—è —Å–ø–∞–≤–Ω–∏—Ç–∏ –∞–≥–µ–Ω—Ç—ñ–≤ –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤

**–ö–æ–º–∞–Ω–¥–∏ –¥–ª—è Cursor:**
```
"Bannerlord how to create multiplayer mission from code"
"Difference between Campaign Mission and Multiplayer Mission"
"Bannerlord Agent spawning in custom missions"
```

#### 3.2.1 –í—Ö—ñ–¥ –∫–ª—ñ—î–Ω—Ç–∞ –≤ MP-–º—ñ—Å—ñ—é (–¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ç–∞ —á–µ–∫-–ª–∏—Å—Ç)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–ª—ñ—î–Ω—Ç –Ω–µ "–≤—Ö–æ–¥–∏—Ç—å" —É –º—ñ—Å—ñ—é, –±–æ –º–∏ –Ω–µ –ø–æ–≤—Ç–æ—Ä—é—î–º–æ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π MP-—Ñ–ª–æ—É –≥—Ä–∏. –•–æ—Å—Ç –≤—ñ–¥–∫—Ä–∏–≤–∞—î –º—ñ—Å—ñ—é —á–µ—Ä–µ–∑ `MissionState.OpenNew` —ñ –≤—Å–µ –ø—Ä–∞—Ü—é—î (–≤—ñ–Ω –∂–µ —Å–µ—Ä–≤–µ—Ä, peer –≤–∂–µ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π). –Ø–∫—â–æ –∫–ª—ñ—î–Ω—Ç —Ç–µ–∂ –≤–∏–∫–ª–∏–∫–∞—î "–≥–æ–ª–∏–π" `MissionState.OpenNew` –∑ —Ç—ñ—î—é –∂ —Å—Ü–µ–Ω–æ—é ‚Äî –≥—Ä–∞ –ø–æ—á–∏–Ω–∞—î –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, –∞–ª–µ –Ω–∞—Ç–∏–≤–Ω–∏–π –∫–æ–¥ –æ—á—ñ–∫—É—î, —â–æ –º—ñ—Å—ñ—è –∑–∞–ø—É—â–µ–Ω–∞ –º–µ—Ä–µ–∂–µ–≤–∏–º –ø–∞–π–ø–ª–∞–π–Ω–æ–º (MissionPeer, –º–µ—Ä–µ–∂–µ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏, —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è). –¶—å–æ–≥–æ —Å—Ç–∞–Ω—É –Ω–µ–º–∞—î ‚Üí –∑–≤–µ—Ä—Ç–∞–Ω–Ω—è –¥–æ null ‚Üí –∫—Ä–∞—à 0xC0000005.

**–©–æ –∑‚Äô—è—Å—É–≤–∞—Ç–∏ (–¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è Multiplayer-–º–æ–¥—É–ª—è):**
- –•—Ç–æ —ñ –∫–æ–ª–∏ –≤—ñ–¥–∫—Ä–∏–≤–∞—î –º—ñ—Å—ñ—é –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ –≤ –æ—Ñ—ñ—Ü—ñ–π–Ω–æ–º—É MP (–∫–ª–∞—Å/–º–µ—Ç–æ–¥ —É `Modules\Multiplayer`, –Ω–∞–ø—Ä. —É `TaleWorlds.MountAndBlade.Multiplayer.dll`).
- –ß–∏ —Å–µ—Ä–≤–µ—Ä –Ω–∞–¥—Å–∏–ª–∞—î –º–µ—Ä–µ–∂–µ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç–∏–ø—É "–≤—ñ–¥–∫—Ä–∏–π –º—ñ—Å—ñ—é X", –ø—ñ—Å–ª—è —è–∫–æ–≥–æ –∫–ª—ñ—î–Ω—Ç –≤–∏–∫–ª–∏–∫–∞—î –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è; —á–∏ –∫–ª—ñ—î–Ω—Ç —Å–∞–º –≤–∏–∫–ª–∏–∫–∞—î –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –ø—ñ—Å–ª—è –ø–µ–≤–Ω–∏—Ö –ø–æ–¥—ñ–π.
- –Ø–∫—ñ –æ–±‚Äô—î–∫—Ç–∏/—Å—Ç–∞–Ω –º–∞—é—Ç—å —ñ—Å–Ω—É–≤–∞—Ç–∏ –¥–æ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º—ñ—Å—ñ—ó: `GameNetwork.MyPeer`, `MissionPeer` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≥—Ä–∞–≤—Ü—è, –º–µ—Ä–µ–∂–µ–≤—ñ behaviors —É Mission.
- –Ø–∫—ñ `MissionBehavior`‚Äô–∏ –¥–æ–¥–∞—î –≥—Ä–∞ –¥–ª—è MP-–º—ñ—Å—ñ—ó (—â–æ–± –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ –≤–∂–µ –±—É–ª–∏ —Ç—ñ —Å–∞–º—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏).
- –ß–∏ —î –æ–∫—Ä–µ–º–∏–π "mission initializer" / –º–µ—Ä–µ–∂–µ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –º—ñ—Å—ñ—ó (—Å—Ü–µ–Ω–∞, –∫–æ–º–∞–Ω–¥–∏, –≥—Ä–∞–≤—Ü—ñ).

**–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –∫—Ä–æ–∫–∏:**
1. **–û–≥–ª—è–¥ DLL:** –í—ñ–¥–∫—Ä–∏—Ç–∏ –≤ dnSpy/ILSpy `Mount & Blade II Bannerlord\Modules\Multiplayer\` ‚Äî —à—É–∫–∞—Ç–∏ `OpenNew`, `MissionState`, `MissionPeer`, `StartMission`, `MissionInitializer`.
2. **–õ–æ–≥—É–≤–∞–Ω–Ω—è –≤ –º–æ–¥—ñ:** –£ `TestMpLaunchPoC.JoinClient` –¥–æ–¥–∞–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ–¥/–ø—ñ—Å–ª—è `InitializeClientSide`, `StartMultiplayerOnClient` —Ç–∞ –≤–∏–∫–ª–∏–∫ `LogGameNetworkState` –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫—Ä–æ–∫—É ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ—Ä—è–¥–æ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤ —ñ —Å—Ç–∞–Ω (MyPeer, IsSessionActive, PeerCount) —É –ª–æ–≥–∞—Ö.
3. **–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∑ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–º MP:** –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≥—Ä—É —á–µ—Ä–µ–∑ –º–µ–Ω—é Multiplayer (Host/Join), –∑–∞–π—Ç–∏ –≤ –±–∏—Ç–≤—É; —É –¥–µ–±–∞–≥–µ—Ä—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, –∫–æ–ª–∏ –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ –∑‚Äô—è–≤–ª—è—î—Ç—å—Å—è `Mission.Current`, —á–∏ –ø–µ—Ä–µ–¥ —Ü–∏–º —Å—Ç–≤–æ—Ä–µ–Ω–∏–π `MissionPeer`, breakpoint –Ω–∞ `MissionState.OpenNew` —ñ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è call stack ‚Äî —Ö—Ç–æ –≤–∏–∫–ª–∏–∫–∞—î –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º—ñ—Å—ñ—ó –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ.

**–ß–µ–∫-–ª–∏—Å—Ç "—â–æ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –∫–ª—ñ—î–Ω—Ç—É" (–∑–∞–ø–æ–≤–Ω–∏—Ç–∏ –ø—ñ—Å–ª—è –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è):**
- [ ] –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ GameNetwork (`InitializeClientSide` / `StartMultiplayerOnClient`) ‚Äî —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ.
- [ ] –ù–∞—è–≤–Ω—ñ—Å—Ç—å `GameNetwork.MyPeer` —ñ –∞–∫—Ç–∏–≤–Ω–∞ —Å–µ—Å—ñ—è –ø–µ—Ä–µ–¥ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è–º –º—ñ—Å—ñ—ó ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —î.
- [ ] –ù–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ "–≥–æ–ª–∏–π" `MissionState.OpenNew` –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ –¥–æ —Ç–æ–≥–æ, —è–∫:
  - [ ] –∞–±–æ —Å–µ—Ä–≤–µ—Ä –Ω–∞–¥—ñ—Å–ª–∞–≤ –æ—Ñ—ñ—Ü—ñ–π–Ω–µ "start mission" —ñ –∫–ª—ñ—î–Ω—Ç –æ–±—Ä–æ–±–∏–≤ –π–æ–≥–æ —Ç–∞–∫ —Å–∞–º–æ, —è–∫ –≤–∞–Ω—ñ–ª—å–Ω–∏–π MP;
  - [ ] –∞–±–æ –≤—Ä—É—á–Ω—É —Å—Ç–≤–æ—Ä–µ–Ω–æ —Ç–æ–π —Å–∞–º–∏–π –Ω–∞–±—ñ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤/—Å—Ç–∞–Ω—É (MissionPeer —Ç–æ—â–æ) –∑–≥—ñ–¥–Ω–æ –∑—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—î–º –∑ Multiplayer DLL.
- [ ] –í—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ –º—ñ—Å—ñ—é –∑ —Ç–∏–º–∏ —Å–∞–º–∏–º–∏ MissionBehavior‚Äô–∞–º–∏ (–∞–±–æ –∑ —Ç–∏–º —Å–∞–º–∏–º mission initializer), —â–æ –π –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π MP.
- [ ] *(–ü—ñ—Å–ª—è –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è)* –ó–∞–ø–∏—Å–∞—Ç–∏ —Å—é–¥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –∫–ª–∞—Å/–º–µ—Ç–æ–¥ —É Multiplayer-–º–æ–¥—É–ª—ñ, —è–∫–∏–π –≤—ñ–¥–∫—Ä–∏–≤–∞—î –º—ñ—Å—ñ—é –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ: _[–∑–∞–ø–æ–≤–Ω–∏—Ç–∏]_.

**–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è (–ø—ñ—Å–ª—è –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è):** –í–∏–∫–ª–∏–∫–∞—Ç–∏ –∑–Ω–∞–π–¥–µ–Ω–∏–π "mission start" —à–ª—è—Ö –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ –ø—ñ—Å–ª—è –ø–æ–¥—ñ—ó "—Ö–æ—Å—Ç –ø–æ—á–∞–≤ –±–∏—Ç–≤—É", –∞–±–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ç–æ–π —Å–∞–º–∏–π —Å—Ç–∞–Ω (MissionPeer + –ø—Ä–∞–≤–∏–ª—å–Ω—ñ behaviors) –ø–µ—Ä–µ–¥ –Ω–∞—à–∏–º `MissionState.OpenNew`.

### 3.3 –ú–µ–Ω—é –≤–∏–±–æ—Ä—É —é–Ω—ñ—Ç–∞ –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤

### 3.4 Spawn system - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–≥–µ–Ω—Ç—ñ–≤ –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤

### 3.5 –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ spectator mode –ø—ñ—Å–ª—è –±–∏—Ç–≤–∏

## –ï–¢–ê–ü 4: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–æ–ª—ñ—Ä—É–≤–∞–Ω–Ω—è (2-4 —Ç–∏–∂–Ω—ñ)

### 4.1 –ë–∞–∑–æ–≤–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
**–ß–∞—Å: 10-15 –≥–æ–¥–∏–Ω**

**–¢–µ—Å—Ç–æ–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó:**

1. **–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è/–≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:**
   - [ ] –•–æ—Å—Ç –º–æ–∂–µ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä
   - [ ] –ö–ª—ñ—î–Ω—Ç –º–æ–∂–µ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è
   - [ ] –ö–æ—Ä—Ä–µ–∫—Ç–Ω–µ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –±–µ–∑ –∫—Ä–∞—à—É
   - [ ] Reconnect –ø—ñ—Å–ª—è –æ–±—Ä–∏–≤—É –∑'—î–¥–Ω–∞–Ω–Ω—è

2. **Spectator mode:**
   - [ ] –ö–ª—ñ—î–Ω—Ç –±–∞—á–∏—Ç—å –ø–æ–∑–∏—Ü—ñ—é —Ö–æ—Å—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç—ñ
   - [ ] –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–∂–Ω—ñ 2 —Å–µ–∫—É–Ω–¥–∏
   - [ ] –ö–ª—ñ—î–Ω—Ç –Ω–µ –º–æ–∂–µ –∫–µ—Ä—É–≤–∞—Ç–∏ –ø–∞—Ä—Ç—ñ—î—é
   - [ ] –ö–ª—ñ—î–Ω—Ç –Ω–µ –º–æ–∂–µ –≤—Ö–æ–¥–∏—Ç–∏ –≤ –º—ñ—Å—Ç–∞

3. **–ë–∏—Ç–≤–∏:**
   - [ ] –ö–ª—ñ—î–Ω—Ç –æ—Ç—Ä–∏–º—É—î —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –ø–æ—á–∞—Ç–æ–∫ –±–∏—Ç–≤–∏
   - [ ] –ú–µ–Ω—é –≤–∏–±–æ—Ä—É —é–Ω—ñ—Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è
   - [ ] –ö–ª—ñ—î–Ω—Ç spawn'–∏—Ç—å—Å—è —è–∫ –≤–∏–±—Ä–∞–Ω–∏–π —é–Ω—ñ—Ç
   - [ ] –ë–∏—Ç–≤–∞ –ø—Ä–∞—Ü—é—î –∑ 2+ –∫–ª—ñ—î–Ω—Ç–∞–º–∏
   - [ ] –ü—ñ—Å–ª—è –±–∏—Ç–≤–∏ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ spectator mode

4. **Edge cases:**
   - [ ] –©–æ —è–∫—â–æ —Ö–æ—Å—Ç –ø–æ–º–µ—Ä —É –±–∏—Ç–≤—ñ?
   - [ ] –©–æ —è–∫—â–æ –∫–ª—ñ—î–Ω—Ç –≤—ñ–¥–∫–ª—é—á–∏–≤—Å—è –ø—ñ–¥ —á–∞—Å –±–∏—Ç–≤–∏?
   - [ ] –©–æ —è–∫—â–æ —Ö–æ—Å—Ç –≤—Ç—ñ–∫ –∑ –±–∏—Ç–≤–∏?
   - [ ] –©–æ —è–∫—â–æ –±–∏—Ç–≤–∞ –±—É–ª–∞ –ø—Ä–æ–≥—Ä–∞–Ω–∞?

### 4.2 –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —Ç–∞ –±–∞–≥-—Ñ—ñ–∫—Å–∏

### 4.3 UI/UX –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è
**–ß–∞—Å: 8-10 –≥–æ–¥–∏–Ω**

**–î–æ–¥–∞—Ç–∏ —è–∫—ñ—Å–Ω–∏–π UI:**

1. **Lobby –µ–∫—Ä–∞–Ω:**
   - –°–ø–∏—Å–æ–∫ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏—Ö –≥—Ä–∞–≤—Ü—ñ–≤
   - –á—Ö —Å—Ç–∞—Ç—É—Å (Ready/Not Ready)
   - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (friendly fire, difficulty)

2. **In-game HUD:**
   - –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
   - Ping –¥–æ —Ö–æ—Å—Ç–∞
   - –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏—Ö –≥—Ä–∞–≤—Ü—ñ–≤

3. **–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:**
   - "John joined the game"
   - "Battle starting in 5... 4... 3..."
   - "You were killed - spectating"

### 4.4 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
**–ß–∞—Å: 4-6 –≥–æ–¥–∏–Ω**

**README.md:**
```markdown
# Bannerlord Coop Spectator

Simple cooperative mod for Mount & Blade II: Bannerlord

## Features
- Spectate host's campaign
- Join battles as host's troops
- No campaign sync needed

## Installation
1. Download latest release
2. Extract to Bannerlord/Modules/
3. Enable in launcher

## How to Play
**Host:**
1. Start campaign
2. Open console (`) and type: coop_host
3. Share your IP with friends

**Clients:**
1. Start Bannerlord
2. Console: coop_join <host_ip>
3. Spectate and wait for battles!

## Troubleshooting
- Port 7777 must be open
- Both players need same game version
- Disable other coop mods

## Known Issues
- See GitHub issues page

## Credits
Created by [–í–∞—à–µ —ñ–º'—è]
```

---

## –ï–¢–ê–ü 5: –†–µ–ª—ñ–∑ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

### 5.1 –ü—É–±–ª—ñ–∫–∞—Ü—ñ—è
